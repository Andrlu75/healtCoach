# –ó–∞–¥–∞—á–∏: –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–∏—Ç–∞–Ω–∏—è

## –û–±–∑–æ—Ä —Ñ—É–Ω–∫—Ü–∏–∏

–ö–æ—É—á —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç—É –ø—Ä–æ–≥—Ä–∞–º–º—É –ø–∏—Ç–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö –∏ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤. –ù–∞–±–æ—Ä –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å. –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ç–æ –µ–¥—ã —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–µ –∏ –¥–µ–ª–∞–µ—Ç –∑–∞–º–µ—á–∞–Ω–∏—è –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏—è—Ö.

## –ü—Ä–∏–Ω—è—Ç—ã–µ —Ä–µ—à–µ–Ω–∏—è

- **–í–≤–æ–¥ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤:** —Å–≤–æ–±–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç (–±–µ–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞)
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:** –Ω–∞—Ä—É—à–µ–Ω–∏—è + —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–æ—É—á—É:** –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —á–∞—Ç (–∫ —Å–æ–æ–±—â–µ–Ω–∏—é –æ —Ñ–æ—Ç–æ –µ–¥—ã)
- **UI –≤ –∫–æ–Ω—Å–æ–ª–∏:** –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ "–ü—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è"

---

## –≠—Ç–∞–ø 1: Backend - –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –ó–∞–¥–∞—á–∞ #1: –°–æ–∑–¥–∞—Ç—å Django –º–æ–¥–µ–ª–∏ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –Ω–µ—Ç
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #2, #5, #6, #20

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `nutrition_programs` —Å –º–æ–¥–µ–ª—è–º–∏:

1. **NutritionProgram** - –æ—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å –ø—Ä–æ–≥—Ä–∞–º–º—ã:
   - `client` (FK -> Client) - –¥–ª—è –∫–∞–∫–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
   - `coach` (FK -> Coach) - –∫—Ç–æ —Å–æ–∑–¥–∞–ª
   - `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä "–î–µ—Ç–æ–∫—Å –Ω–µ–¥–µ–ª—è")
   - `description` - –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
   - `start_date` - –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞
   - `end_date` - –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è (–≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–∑ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–Ω–µ–π)
   - `duration_days` - –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –¥–Ω—è—Ö
   - `status` - 'draft' | 'active' | 'completed' | 'cancelled'
   - `created_at`, `updated_at`

2. **NutritionProgramDay** - –¥–µ–Ω—å –ø—Ä–æ–≥—Ä–∞–º–º—ã:
   - `program` (FK -> NutritionProgram)
   - `day_number` - –Ω–æ–º–µ—Ä –¥–Ω—è (1, 2, 3...)
   - `date` - –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –¥–∞—Ç–∞ —ç—Ç–æ–≥–æ –¥–Ω—è
   - `allowed_ingredients` (JSONField) - —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ [{"name": "—è–±–ª–æ–∫–æ"}, ...]
   - `forbidden_ingredients` (JSONField) - —Å–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
   - `notes` - –∑–∞–º–µ—Ç–∫–∏ –∫–æ—É—á–∞ –Ω–∞ —ç—Ç–æ—Ç –¥–µ–Ω—å

3. **MealComplianceCheck** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏—ë–º–∞ –ø–∏—â–∏:
   - `meal` (FK -> Meal)
   - `program_day` (FK -> NutritionProgramDay)
   - `is_compliant` - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–µ
   - `found_forbidden` (JSONField) - –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã
   - `found_allowed` (JSONField) - –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã
   - `ai_comment` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π AI —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
   - `coach_notified` - —É–≤–µ–¥–æ–º–ª—ë–Ω –ª–∏ –∫–æ—É—á
   - `created_at`

–î–æ–±–∞–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ admin.py

---

### –ó–∞–¥–∞—á–∞ #14: –°–æ–∑–¥–∞—Ç—å TypeScript —Ç–∏–ø—ã –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –Ω–µ—Ç
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #7, #8, #9, #10, #11, #12, #13, #15, #16

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã –≤ –æ–±–æ–∏—Ö —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö:

**frontend/console/src/types/nutrition.ts:**
```typescript
interface NutritionProgram {
  id: number;
  client: number;
  client_name: string;
  coach: number;
  name: string;
  description: string;
  start_date: string;
  end_date: string;
  duration_days: number;
  status: 'draft' | 'active' | 'completed' | 'cancelled';
  compliance_rate: number;
  total_meals: number;
  total_violations: number;
  days: NutritionProgramDay[];
  created_at: string;
  updated_at: string;
}

interface NutritionProgramDay {
  id: number;
  day_number: number;
  date: string;
  allowed_ingredients: string[];
  forbidden_ingredients: string[];
  notes: string;
}

interface MealComplianceCheck {
  id: number;
  meal: number;
  meal_name: string;
  meal_time: string;
  program_day: number;
  is_compliant: boolean;
  found_forbidden: string[];
  found_allowed: string[];
  ai_comment: string;
  created_at: string;
}

interface ComplianceStats {
  total_meals: number;
  compliant_meals: number;
  violations: number;
  compliance_percentage: number;
  violations_by_day: { day: number; date: string; violations: number }[];
  top_violated_ingredients: { name: string; count: number }[];
}
```

**frontend/miniapp/src/types/nutrition.ts:**
```typescript
interface TodayNutritionProgram {
  program_name: string;
  day_number: number;
  total_days: number;
  date: string;
  allowed_ingredients: string[];
  forbidden_ingredients: string[];
  notes: string | null;
  today_stats: {
    total_meals: number;
    compliant: number;
    violations: number;
  };
}

interface NutritionHistory {
  program_name: string;
  days: NutritionDayHistory[];
}

interface NutritionDayHistory {
  day: number;
  date: string;
  compliance_rate: number;
  meals: number;
  violations: number;
}
```

---

### –ó–∞–¥–∞—á–∞ #19: –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å rapidfuzz –¥–ª—è fuzzy matching

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –Ω–µ—Ç
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #2

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–î–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ —Å —É—á—ë—Ç–æ–º –æ–ø–µ—á–∞—Ç–æ–∫ –∏ –≤–∞—Ä–∏–∞—Ü–∏–π –Ω–∞–ø–∏—Å–∞–Ω–∏—è:

1. **–î–æ–±–∞–≤–∏—Ç—å –≤ requirements/base.txt:**
   ```
   rapidfuzz>=3.0.0
   ```

2. **–í services.py –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
   ```python
   from rapidfuzz import fuzz, process

   def find_ingredient_match(ingredient: str, ingredients_list: list[str], threshold: int = 80) -> str | None:
       """
       –ù–∞—Ö–æ–¥–∏—Ç –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ—Ö–æ–∂–∏–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç –≤ —Å–ø–∏—Å–∫–µ.
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç None –µ—Å–ª–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ < threshold.
       """
       if not ingredients_list:
           return None

       result = process.extractOne(
           ingredient.lower(),
           [i.lower() for i in ingredients_list],
           scorer=fuzz.token_sort_ratio
       )

       if result and result[1] >= threshold:
           idx = [i.lower() for i in ingredients_list].index(result[0])
           return ingredients_list[idx]

       return None
   ```

3. **–ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã:**
   - "—Å–∞—Ö–∞—Ä" ‚Üí "–°–∞—Ö–∞—Ä –±–µ–ª—ã–π" (match)
   - "–∫—É—Ä–∏–Ω–Ω–∞—è –≥—Ä—É–¥–∫–∞" ‚Üí "–∫—É—Ä–∏–Ω–∞—è –≥—Ä—É–¥–∫–∞" (match, –æ–ø–µ—á–∞—Ç–∫–∞)
   - "—Ö–ª–µ–± –±–µ–ª—ã–π" ‚Üí "–±–µ–ª—ã–π —Ö–ª–µ–±" (match, –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤)
   - "—è–±–ª–æ–∫–æ" ‚Üí "–≥—Ä—É—à–∞" (no match)

---

## –≠—Ç–∞–ø 2: Backend - API –∏ —Å–µ—Ä–≤–∏—Å—ã

### –ó–∞–¥–∞—á–∞ #2: –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #1, #19
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #3, #6, #17

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–°–æ–∑–¥–∞—Ç—å `apps/nutrition_programs/services.py` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏:

1. **get_active_program_for_client(client, date=None)**
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É –ø–∏—Ç–∞–Ω–∏—è –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É
   - –ï—Å–ª–∏ date=None, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ–≥–æ–¥–Ω—è (–≤ timezone –∫–ª–∏–µ–Ω—Ç–∞)
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç None –µ—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–µ—Ç

2. **get_program_day(program, date)**
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç NutritionProgramDay –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –¥–∞—Ç—ã
   - –í—ã—á–∏—Å–ª—è–µ—Ç day_number –Ω–∞ –æ—Å–Ω–æ–≤–µ start_date –ø—Ä–æ–≥—Ä–∞–º–º—ã

3. **check_meal_compliance(meal, program_day)**
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç Meal —Å —É–∂–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–º–∏ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞–º–∏
   - –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç ingredients –∏–∑ Meal —Å allowed/forbidden –∏–∑ program_day
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç fuzzy matching (rapidfuzz) –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç dict: {is_compliant, found_forbidden, found_allowed, neutral}

4. **generate_compliance_feedback(compliance_result, program_day)**
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –∑–∞–º–µ—á–∞–Ω–∏—è/–ø–æ—Ö–≤–∞–ª—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
   - –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è: "–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–¥—É–∫—Ç—ã –Ω–µ –∏–∑ –≤–∞—à–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã: X, Y. –°–µ–≥–æ–¥–Ω—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: A, B, C"
   - –ï—Å–ª–∏ –≤—Å—ë –û–ö: "–û—Ç–ª–∏—á–Ω–æ! –í—ã —Å–æ–±–ª—é–¥–∞–µ—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É –ø–∏—Ç–∞–Ω–∏—è"

5. **create_compliance_check(meal, program_day, compliance_result, ai_comment)**
   - –°–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å—å MealComplianceCheck –≤ –ë–î
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç

---

### –ó–∞–¥–∞—á–∞ #5: –°–æ–∑–¥–∞—Ç—å API endpoints –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏ –∫–æ—É—á–∞

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #1
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #7, #8, #9, #15, #16, #18

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–°–æ–∑–¥–∞—Ç—å `apps/nutrition_programs/views.py` –∏ `urls.py` —Å API –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏:

1. **NutritionProgramViewSet (CRUD):**
   - `GET /api/nutrition-programs/` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–æ–≥—Ä–∞–º–º –∫–æ—É—á–∞
     - –§–∏–ª—å—Ç—Ä—ã: client_id, status, date_range
     - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è/–Ω–∞—á–∞–ª–∞
   - `POST /api/nutrition-programs/` - —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
   - `GET /api/nutrition-programs/{id}/` - –¥–µ—Ç–∞–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å –¥–Ω—è–º–∏
   - `PUT /api/nutrition-programs/{id}/` - –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
   - `DELETE /api/nutrition-programs/{id}/` - —É–¥–∞–ª–∏—Ç—å (–∏–ª–∏ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å)
   - `POST /api/nutrition-programs/{id}/activate/` - –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
   - `POST /api/nutrition-programs/{id}/cancel/` - –æ—Ç–º–µ–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É

2. **NutritionProgramDayViewSet:**
   - `GET /api/nutrition-programs/{program_id}/days/` - —Å–ø–∏—Å–æ–∫ –¥–Ω–µ–π
   - `PUT /api/nutrition-programs/{program_id}/days/{day_number}/` - –æ–±–Ω–æ–≤–∏—Ç—å –¥–µ–Ω—å
   - `POST /api/nutrition-programs/{program_id}/days/copy/` - —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–µ–Ω—å –Ω–∞ –¥—Ä—É–≥–∏–µ –¥–Ω–∏

3. **ComplianceStatsViewSet:**
   - `GET /api/nutrition-programs/{program_id}/stats/` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã
   - `GET /api/nutrition-programs/{program_id}/violations/` - —Å–ø–∏—Å–æ–∫ –Ω–∞—Ä—É—à–µ–Ω–∏–π

4. **Serializers:**
   - NutritionProgramSerializer (—Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –¥–Ω—è–º–∏)
   - NutritionProgramDaySerializer
   - MealComplianceCheckSerializer
   - ComplianceStatsSerializer

---

### –ó–∞–¥–∞—á–∞ #6: –°–æ–∑–¥–∞—Ç—å API endpoints –¥–ª—è miniapp –∫–ª–∏–µ–Ω—Ç–∞

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #1, #2
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #10, #11, #12, #13, #15, #18

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–î–æ–±–∞–≤–∏—Ç—å endpoints –≤ `apps/nutrition_programs/views.py` –¥–ª—è miniapp:

1. **GET /api/miniapp/nutrition-program/today/**
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—É –ø–∏—Ç–∞–Ω–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
   - Response:
   ```json
   {
     "program_name": "–î–µ—Ç–æ–∫—Å –Ω–µ–¥–µ–ª—è",
     "day_number": 3,
     "total_days": 7,
     "date": "2025-01-31",
     "allowed_ingredients": ["–æ–≤–æ—â–∏", "–Ω–µ–∂–∏—Ä–Ω–æ–µ –º—è—Å–æ", "–∫—Ä—É–ø—ã"],
     "forbidden_ingredients": ["—Å–∞—Ö–∞—Ä", "–±–µ–ª—ã–π —Ö–ª–µ–±", "–∂–∏—Ä–Ω–æ–µ"],
     "notes": "–î–µ–Ω—å –±–µ–∑ –º–æ–ª–æ—á–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤",
     "today_stats": {
       "total_meals": 2,
       "compliant": 1,
       "violations": 1
     }
   }
   ```

2. **GET /api/miniapp/nutrition-program/history/**
   - –ò—Å—Ç–æ—Ä–∏—è —Å–æ–±–ª—é–¥–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ –¥–Ω—è–º

3. **GET /api/miniapp/nutrition-program/violations/**
   - –°–ø–∏—Å–æ–∫ –Ω–∞—Ä—É—à–µ–Ω–∏–π —Ç–µ–∫—É—â–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã

4. **–î–æ–±–∞–≤–∏—Ç—å –≤ /api/miniapp/dashboard/ –ø–æ–ª–µ:**
   - `active_nutrition_program` —Å –∫—Ä–∞—Ç–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

---

### –ó–∞–¥–∞—á–∞ #3: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ –∞–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ –µ–¥—ã

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #2
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #4, #13, #20, #22

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `apps/meals/services.py` - —Ñ—É–Ω–∫—Ü–∏–∏ –∞–Ω–∞–ª–∏–∑–∞ —Ñ–æ—Ç–æ:

1. **–í classify_and_analyze() (fast —Ä–µ–∂–∏–º):**
   - –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Ñ–æ—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã
   - –ï—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –µ—Å—Ç—å - –≤—ã–∑–≤–∞—Ç—å check_meal_compliance()
   - –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ –æ—Ç–≤–µ—Ç AI
   - –°–æ–∑–¥–∞—Ç—å MealComplianceCheck –∑–∞–ø–∏—Å—å

2. **–í analyze_food_smart() (smart —Ä–µ–∂–∏–º):**
   - –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è MealDraft
   - –í confirm_draft() –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ –ø—Ä–æ–≤–µ—Ä–∫–∏

3. **–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:**
   - –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è - –¥–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫ —Å –∑–∞–º–µ—á–∞–Ω–∏–µ–º –ø–æ—Å–ª–µ –ö–ë–ñ–£:
   ```
   ‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ! –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–¥—É–∫—Ç—ã –Ω–µ –∏–∑ –≤–∞—à–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã:
   - —Å–∞—Ö–∞—Ä
   - –±–µ–ª—ã–π —Ö–ª–µ–±

   –°–µ–≥–æ–¥–Ω—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –æ–≤–æ—â–∏, –Ω–µ–∂–∏—Ä–Ω–æ–µ –º—è—Å–æ, –∫—Ä—É–ø—ã
   ```

4. **–î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ –≤ Meal –º–æ–¥–µ–ª—å:**
   - `program_check_status` - null | 'compliant' | 'violation'

---

### –ó–∞–¥–∞—á–∞ #4: –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞—Ä—É—à–µ–Ω–∏—è—Ö –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞ –∫–æ—É—á—É

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #3
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #22

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–æ—Ç–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç:

1. **–í apps/bot/handlers.py:**
   - –ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ —Ñ–æ—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è
   - –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è - –¥–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫ –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ—É—á—É:
   ```
   üì∏ –ù–æ–≤—ã–π –ø—Ä–∏—ë–º –ø–∏—â–∏ –æ—Ç {client_name}

   *–ü–∞—Å—Ç–∞ –ö–∞—Ä–±–æ–Ω–∞—Ä–∞*
   –ö–∫–∞–ª: 450 | –ë: 20 | –ñ: 25 | –£: 45

   ‚ö†Ô∏è –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è!
   –ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã: —Å–∞—Ö–∞—Ä, –±–µ–ª—ã–π —Ö–ª–µ–±
   ```

2. **–ï—Å–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–µ:**
   ```
   ‚úì –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–µ –ø–∏—Ç–∞–Ω–∏—è
   ```

3. **–í —Å–æ–æ–±—â–µ–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç—É:**
   - –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫ –ø–æ—Å–ª–µ –ö–ë–ñ–£
   - –° —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ —á—Ç–æ –º–æ–∂–Ω–æ –µ—Å—Ç—å —Å–µ–≥–æ–¥–Ω—è (–µ—Å–ª–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–µ)

---

### –ó–∞–¥–∞—á–∞ #20: –î–æ–±–∞–≤–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç –ø–µ—Ä—Å–æ–Ω—ã –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #1, #3
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #22

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–†–∞—Å—à–∏—Ä–∏—Ç—å –º–æ–¥–µ–ª—å BotPersona –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è:

1. **–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ –≤ BotPersona –º–æ–¥–µ–ª—å:**
   ```python
   nutrition_program_prompt = models.TextField(
       blank=True,
       default='',
       help_text='–ü—Ä–æ–º–ø—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –µ–¥—ã —Å —É—á—ë—Ç–æ–º –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è'
   )
   ```

2. **–î–µ—Ñ–æ–ª—Ç–Ω—ã–π –ø—Ä–æ–º–ø—Ç:**
   ```
   –ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ —Ñ–æ—Ç–æ –µ–¥—ã —É—á–∏—Ç—ã–≤–∞–π –ø—Ä–æ–≥—Ä–∞–º–º—É –ø–∏—Ç–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞.

   –°–µ–≥–æ–¥–Ω—è –∫–ª–∏–µ–Ω—Ç—É:
   - –ú–û–ñ–ù–û: {allowed_ingredients}
   - –ù–ï–õ–¨–ó–Ø: {forbidden_ingredients}

   –ï—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã:
   - –í–µ–∂–ª–∏–≤–æ —É–∫–∞–∂–∏ –Ω–∞ —ç—Ç–æ
   - –ü–æ—Ä–µ–∫–æ–º–µ–Ω–¥—É–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏–∑ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
   - –ë—É–¥—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º, –Ω–µ –æ—Å—É–∂–¥–∞–π

   –ï—Å–ª–∏ –≤—Å—ë —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–µ:
   - –ü–æ—Ö–≤–∞–ª–∏ –∫–ª–∏–µ–Ω—Ç–∞ –∑–∞ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
   ```

3. **UI –≤ PersonaSettings.tsx:**
   - –ù–æ–≤–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ "–ü—Ä–æ–º–ø—Ç –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è"
   - –ü–æ–¥—Å–∫–∞–∑–∫–∞ —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏

---

## –≠—Ç–∞–ø 3: Frontend - API –∫–ª–∏–µ–Ω—Ç—ã

### –ó–∞–¥–∞—á–∞ #15: –°–æ–∑–¥–∞—Ç—å API –∫–ª–∏–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º –ø–∏—Ç–∞–Ω–∏—è

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #5, #6, #14
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #7, #8, #9, #10, #11, #12, #16

**–û–ø–∏—Å–∞–Ω–∏–µ:**

**frontend/console/src/api/nutritionPrograms.ts:**
```typescript
export const getNutritionPrograms = (params?: {
  client_id?: number;
  status?: string;
}) => api.get('/api/nutrition-programs/', { params });

export const createNutritionProgram = (data: CreateProgramDto) =>
  api.post('/api/nutrition-programs/', data);

export const getNutritionProgram = (id: number) =>
  api.get(`/api/nutrition-programs/${id}/`);

export const updateNutritionProgram = (id: number, data: UpdateProgramDto) =>
  api.put(`/api/nutrition-programs/${id}/`, data);

export const deleteNutritionProgram = (id: number) =>
  api.delete(`/api/nutrition-programs/${id}/`);

export const activateNutritionProgram = (id: number) =>
  api.post(`/api/nutrition-programs/${id}/activate/`);

export const cancelNutritionProgram = (id: number) =>
  api.post(`/api/nutrition-programs/${id}/cancel/`);

export const getProgramStats = (id: number) =>
  api.get(`/api/nutrition-programs/${id}/stats/`);

export const getProgramViolations = (id: number) =>
  api.get(`/api/nutrition-programs/${id}/violations/`);
```

**frontend/miniapp/src/api/nutrition.ts:**
```typescript
export const getTodayProgram = () =>
  api.get('/api/miniapp/nutrition-program/today/');

export const getProgramHistory = () =>
  api.get('/api/miniapp/nutrition-program/history/');

export const getProgramViolations = () =>
  api.get('/api/miniapp/nutrition-program/violations/');
```

**React Query hooks:**
- useNutritionPrograms()
- useNutritionProgram(id)
- useProgramStats(id)
- useTodayProgram()
- useProgramHistory()

---

## –≠—Ç–∞–ø 4: Frontend Console - –°—Ç—Ä–∞–Ω–∏—Ü—ã –∫–æ—É—á–∞

### –ó–∞–¥–∞—á–∞ #7: –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º –ø–∏—Ç–∞–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #5, #14, #15
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #21, #22

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–°–æ–∑–¥–∞—Ç—å `frontend/console/src/pages/NutritionPrograms.tsx`:

1. **–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
   - "–ü—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è"
   - –ö–Ω–æ–ø–∫–∞ "+ –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É"

2. **–§–∏–ª—å—Ç—Ä—ã:**
   - –í—ã–±–æ—Ä –∫–ª–∏–µ–Ω—Ç–∞ (dropdown —Å–æ –≤—Å–µ–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏)
   - –°—Ç–∞—Ç—É—Å: –≤—Å–µ / –∞–∫—Ç–∏–≤–Ω—ã–µ / –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ / —á–µ—Ä–Ω–æ–≤–∏–∫–∏
   - –ü–µ—Ä–∏–æ–¥: —Ç–µ–∫—É—â–∏–µ / –ø—Ä–æ—à–µ–¥—à–∏–µ / –±—É–¥—É—â–∏–µ

3. **–¢–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–≥—Ä–∞–º–º:**
   - –ö–æ–ª–æ–Ω–∫–∏: –ö–ª–∏–µ–Ω—Ç, –ù–∞–∑–≤–∞–Ω–∏–µ, –ü–µ—Ä–∏–æ–¥ (–¥–∞—Ç—ã), –î–Ω–µ–π, –°—Ç–∞—Ç—É—Å, –°–æ–±–ª—é–¥–µ–Ω–∏–µ %, –î–µ–π—Å—Ç–≤–∏—è
   - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–æ–ª–æ–Ω–∫–∞–º
   - –ü–∞–≥–∏–Ω–∞—Ü–∏—è

4. **–°—Ç–∞—Ç—É—Å-–±–µ–π–¥–∂–∏:**
   - draft (—Å–µ—Ä—ã–π), active (–∑–µ–ª—ë–Ω—ã–π), completed (—Å–∏–Ω–∏–π), cancelled (–∫—Ä–∞—Å–Ω—ã–π)

5. **–ö–æ–ª–æ–Ω–∫–∞ "–°–æ–±–ª—é–¥–µ–Ω–∏–µ":**
   - –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Å –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º
   - –¶–≤–µ—Ç: –∑–µ–ª—ë–Ω—ã–π > 80%, –∂—ë–ª—Ç—ã–π 50-80%, –∫—Ä–∞—Å–Ω—ã–π < 50%

6. **–î–æ–±–∞–≤–∏—Ç—å –≤ —Ä–æ—É—Ç–µ—Ä –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—é:**
   - –ü—É—Ç—å: /nutrition-programs
   - –ò–∫–æ–Ω–∫–∞ –≤ sidebar (Utensils –∏–∑ Lucide)

---

### –ó–∞–¥–∞—á–∞ #8: –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #5, #14, #15
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #21, #22

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–°–æ–∑–¥–∞—Ç—å `frontend/console/src/pages/NutritionProgramEdit.tsx`:

1. **–®–∞–ø–∫–∞:**
   - Breadcrumbs: –ü—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è > –°–æ–∑–¥–∞–Ω–∏–µ / –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ "{–Ω–∞–∑–≤–∞–Ω–∏–µ}"
   - –ö–Ω–æ–ø–∫–∏: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫, –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å, –û—Ç–º–µ–Ω–∞

2. **–ë–ª–æ–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:**
   - –í—ã–±–æ—Ä –∫–ª–∏–µ–Ω—Ç–∞ (dropdown, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
   - –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã (—Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ)
   - –û–ø–∏—Å–∞–Ω–∏–µ (textarea)
   - –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ (datepicker)
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π (number input, 1-30)

3. **–ë–ª–æ–∫ –¥–Ω–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã (—Ç–∞–±–ª–∏—Ü–∞/–∞–∫–∫–æ—Ä–¥–µ–æ–Ω):**
   - –ó–∞–≥–æ–ª–æ–≤–∫–∏: –î–µ–Ω—å 1 (–ü–Ω, 03.02), –î–µ–Ω—å 2 (–í—Ç, 04.02) –∏ —Ç.–¥.

4. **–ö–∞—Ä—Ç–æ—á–∫–∞ –¥–Ω—è:**
   - **–†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:** Textarea –∏–ª–∏ tag-input
   - **–ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:** –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - **–ó–∞–º–µ—Ç–∫–∏ –Ω–∞ –¥–µ–Ω—å:** Textarea
   - **–ö–Ω–æ–ø–∫–∏:** "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –≤—Å–µ –¥–Ω–∏", "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –¥–Ω—è"

5. **–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**
   - "–ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –¥–Ω–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ"
   - "–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ –ø—Ä–æ—à–ª–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã"

6. **–í–∞–ª–∏–¥–∞—Ü–∏—è:**
   - –ú–∏–Ω–∏–º—É–º 1 –¥–µ–Ω—å
   - –ö–ª–∏–µ–Ω—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
   - –•–æ—Ç—è –±—ã –æ–¥–∏–Ω –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç

---

### –ó–∞–¥–∞—á–∞ #9: –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #5, #14, #15
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #21, #22

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–°–æ–∑–¥–∞—Ç—å `frontend/console/src/pages/NutritionProgramStats.tsx`:

1. **–ó–∞–≥–æ–ª–æ–≤–æ–∫:**
   - –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –ö–ª–∏–µ–Ω—Ç, –ü–µ—Ä–∏–æ–¥, –°—Ç–∞—Ç—É—Å

2. **–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∫–∞—Ä—Ç–æ—á–∫–∏):**
   - –í—Å–µ–≥–æ –ø—Ä–∏—ë–º–æ–≤ –ø–∏—â–∏, –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π, –ù–∞—Ä—É—à–µ–Ω–∏–π, –ü—Ä–æ—Ü–µ–Ω—Ç —Å–æ–±–ª—é–¥–µ–Ω–∏—è

3. **–ì—Ä–∞—Ñ–∏–∫ –ø–æ –¥–Ω—è–º:**
   - Recharts BarChart
   - Stacked bars: –∑–µ–ª—ë–Ω—ã–π (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è), –∫—Ä–∞—Å–Ω—ã–π (–Ω–∞—Ä—É—à–µ–Ω–∏—è)

4. **–¢–∞–±–ª–∏—Ü–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–π:**
   - –ö–æ–ª–æ–Ω–∫–∏: –î–µ–Ω—å, –î–∞—Ç–∞, –í—Ä–µ–º—è, –ë–ª—é–¥–æ, –ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã

5. **–¢–æ–ø –Ω–∞—Ä—É—à–∞–µ–º—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤:**
   - Pie chart –∏–ª–∏ —Å–ø–∏—Å–æ–∫

6. **–≠–∫—Å–ø–æ—Ä—Ç:**
   - –ö–Ω–æ–ø–∫–∏ "–≠–∫—Å–ø–æ—Ä—Ç –≤ PDF", "–≠–∫—Å–ø–æ—Ä—Ç –≤ CSV"

---

### –ó–∞–¥–∞—á–∞ #16: –î–æ–±–∞–≤–∏—Ç—å –≤–∫–ª–∞–¥–∫—É –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è –≤ ClientDetail –∫–æ–Ω—Å–æ–ª–∏

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #5, #14, #15
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #22

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `frontend/console/src/pages/ClientDetail.tsx`:

1. **–î–æ–±–∞–≤–∏—Ç—å 5-—é –≤–∫–ª–∞–¥–∫—É "–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–∏—Ç–∞–Ω–∏—è":**
   - –†—è–¥–æ–º —Å: –ü–∏—Ç–∞–Ω–∏–µ, –ú–µ—Ç—Ä–∏–∫–∏, –ß–∞—Ç, –ù–∞—Å—Ç—Ä–æ–π–∫–∏
   - –ò–∫–æ–Ω–∫–∞: Utensils –∏–ª–∏ Apple

2. **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–∫–∏:**
   - –ï—Å–ª–∏ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞: –∫–∞—Ä—Ç–æ—á–∫–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π, –ø—Ä–æ–≥—Ä–µ—Å—Å, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
   - –ï—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–µ—Ç: "–£ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è" + –∫–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞—Ç—å

3. **–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–≥—Ä–∞–º–º:**
   - –°–ø–∏—Å–æ–∫ –ø—Ä–æ—à–ª—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º –∫–ª–∏–µ–Ω—Ç–∞

4. **–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**
   - –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å/–û—Ç–º–µ–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É

---

## –≠—Ç–∞–ø 5: Frontend Miniapp - –≠–∫—Ä–∞–Ω—ã –∫–ª–∏–µ–Ω—Ç–∞

### –ó–∞–¥–∞—á–∞ #10: –°–æ–∑–¥–∞—Ç—å —ç–∫—Ä–∞–Ω –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è –≤ miniapp

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #6, #14, #15
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #21, #22

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–°–æ–∑–¥–∞—Ç—å `frontend/miniapp/src/features/nutrition/NutritionProgram.tsx`:

1. **–ù–∞–≤–∏–≥–∞—Ü–∏—è:**
   - –ù–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ "–ü—Ä–æ–≥—Ä–∞–º–º–∞" –≤ BottomNav (–∏–∫–æ–Ω–∫–∞ Apple –∏–ª–∏ Utensils)
   - –ü—É—Ç—å: /nutrition

2. **–ó–∞–≥–æ–ª–æ–≤–æ–∫ —ç–∫—Ä–∞–Ω–∞:**
   - "–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–∏—Ç–∞–Ω–∏—è"
   - "–î–µ–Ω—å 3 –∏–∑ 7" - –ø—Ä–æ–≥—Ä–µ—Å—Å

3. **–ï—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–µ—Ç:**
   - –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä: "–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è"

4. **–ö–∞—Ä—Ç–æ—á–∫–∞ "–°–µ–≥–æ–¥–Ω—è":**
   - –î–∞—Ç–∞, –î–µ–Ω—å –ø—Ä–æ–≥—Ä–∞–º–º—ã

5. **–ë–ª–æ–∫ "–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è" (–∑–µ–ª—ë–Ω—ã–π):**
   - –°–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –≤ –≤–∏–¥–µ —Ç–µ–≥–æ–≤

6. **–ë–ª–æ–∫ "–ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è" (–∫—Ä–∞—Å–Ω—ã–π):**
   - –°–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤

7. **–ó–∞–º–µ—Ç–∫–∏ –∫–æ—É—á–∞:**
   - –ï—Å–ª–∏ –µ—Å—Ç—å notes –Ω–∞ —ç—Ç–æ—Ç –¥–µ–Ω—å

8. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —Å–µ–≥–æ–¥–Ω—è:**
   - "–ü—Ä–∏—ë–º—ã –ø–∏—â–∏: 2 | –°–æ–±–ª—é–¥–µ–Ω–∏–µ: 1 | –ù–∞—Ä—É—à–µ–Ω–∏—è: 1"

---

### –ó–∞–¥–∞—á–∞ #11: –°–æ–∑–¥–∞—Ç—å —ç–∫—Ä–∞–Ω –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–±–ª—é–¥–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ miniapp

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #6, #14, #15
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #21, #22

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–°–æ–∑–¥–∞—Ç—å `frontend/miniapp/src/features/nutrition/NutritionHistory.tsx`:

1. **–ù–∞–≤–∏–≥–∞—Ü–∏—è:**
   - –ü–µ—Ä–µ—Ö–æ–¥ —Å –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∫–Ω–æ–ø–∫–æ–π "–ò—Å—Ç–æ—Ä–∏—è"

2. **–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
   - –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –∫—Ä—É–≥–æ–≤—ã–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º
   - –ü—Ä–æ—Ü–µ–Ω—Ç —Å–æ–±–ª—é–¥–µ–Ω–∏—è –∑–∞ –≤—Å—é –ø—Ä–æ–≥—Ä–∞–º–º—É

3. **–°–ø–∏—Å–æ–∫ –¥–Ω–µ–π (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π):**
   ```
   –î–µ–Ω—å 1 - –ü–Ω, 29 —è–Ω–≤
   ‚úì‚úì‚úì (3/3) - 100%

   –î–µ–Ω—å 2 - –í—Ç, 30 —è–Ω–≤
   ‚úì‚úì‚úó (2/3) - 66%
   ```
   - –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –¥–µ–Ω—å - —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è

4. **–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –¥–Ω—è:**
   - –°–ø–∏—Å–æ–∫ –ø—Ä–∏—ë–º–æ–≤ –ø–∏—â–∏ —Å —Å—Ç–∞—Ç—É—Å–æ–º

5. **–°—Ç–∏–ª–∏–∑–∞—Ü–∏—è:**
   - Telegram-—Å—Ç–∏–ª—å, Framer Motion –∞–Ω–∏–º–∞—Ü–∏–∏

---

### –ó–∞–¥–∞—á–∞ #12: –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–∂–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è –Ω–∞ Dashboard miniapp

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #6, #14, #15
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #22

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `frontend/miniapp/src/features/diary/Dashboard.tsx`:

1. **–ù–æ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ "–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–∏—Ç–∞–Ω–∏—è" (–ø–æ—Å–ª–µ –ö–ë–ñ–£):**
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
   - –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –≤–∏–¥:
   ```
   üçé –ü—Ä–æ–≥—Ä–∞–º–º–∞ "–î–µ—Ç–æ–∫—Å –Ω–µ–¥–µ–ª—è"
   –î–µ–Ω—å 3 –∏–∑ 7 | –°–æ–±–ª—é–¥–µ–Ω–∏–µ —Å–µ–≥–æ–¥–Ω—è: 50%
   [–ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí]
   ```

2. **–í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä:**
   - –ó–µ–ª—ë–Ω—ã–π –µ—Å–ª–∏ 100%, –∂—ë–ª—Ç—ã–π –µ—Å–ª–∏ 50-99%, –∫—Ä–∞—Å–Ω—ã–π –µ—Å–ª–∏ < 50%

3. **API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
   - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ active_nutrition_program –≤ dashboard

---

### –ó–∞–¥–∞—á–∞ #13: –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–º–µ—á–∞–Ω–∏–π –æ –Ω–∞—Ä—É—à–µ–Ω–∏—è—Ö –≤ miniapp

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #3, #6, #14
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #22

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –µ–¥—ã:

1. **–í AddMeal (—Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞):**
   - –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è:
   ```
   ‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ!
   –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–¥—É–∫—Ç—ã –Ω–µ –∏–∑ –≤–∞—à–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã:
   ‚Ä¢ —Å–∞—Ö–∞—Ä
   ‚Ä¢ –±–µ–ª—ã–π —Ö–ª–µ–±

   –°–µ–≥–æ–¥–Ω—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
   ‚Ä¢ –æ–≤–æ—â–∏, –Ω–µ–∂–∏—Ä–Ω–æ–µ –º—è—Å–æ, –∫—Ä—É–ø—ã
   ```

2. **–í MealDraft (smart —Ä–µ–∂–∏–º):**
   - –ü–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å –∫—Ä–∞—Å–Ω—ã–º –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –∏–∑ forbidden —Å–ø–∏—Å–∫–∞

3. **–í —Å–ø–∏—Å–∫–µ –ø—Ä–∏—ë–º–æ–≤ –ø–∏—â–∏ (Diary):**
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ (‚úì –∏–ª–∏ ‚ö†Ô∏è)

4. **API:**
   - –†–∞—Å—à–∏—Ä–∏—Ç—å /api/miniapp/meals/ –ø–æ–ª–µ–º compliance_status

---

## –≠—Ç–∞–ø 6: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è

### –ó–∞–¥–∞—á–∞ #21: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–æ—É—Ç–∏–Ω–≥ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—é –¥–ª—è –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #7, #8, #9, #10, #11
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #22

**–û–ø–∏—Å–∞–Ω–∏–µ:**

1. **Console —Ä–æ—É—Ç–µ—Ä:**
   - `/nutrition-programs` - —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–≥—Ä–∞–º–º
   - `/nutrition-programs/new` - —Å–æ–∑–¥–∞–Ω–∏–µ
   - `/nutrition-programs/:id` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - `/nutrition-programs/:id/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

2. **Sidebar –∫–æ–Ω—Å–æ–ª–∏:**
   - –ü—É–Ω–∫—Ç "–ü—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è" —Å –∏–∫–æ–Ω–∫–æ–π Utensils
   - –ü–æ–∑–∏—Ü–∏—è: –ø–æ—Å–ª–µ "–ö–ª–∏–µ–Ω—Ç—ã", –ø–µ—Ä–µ–¥ "–û—Ç—á—ë—Ç—ã"

3. **Miniapp —Ä–æ—É—Ç–µ—Ä:**
   - `/nutrition` - –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
   - `/nutrition/history` - –∏—Å—Ç–æ—Ä–∏—è

4. **BottomNav miniapp:**
   - –ò–∫–æ–Ω–∫–∞ "–ü—Ä–æ–≥—Ä–∞–º–º–∞" –º–µ–∂–¥—É "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞" –∏ "–ü—Ä–æ—Ñ–∏–ª—å"

5. **Deep links:**
   - Query param: ?tab=nutrition –¥–ª—è ClientDetail

---

### –ó–∞–¥–∞—á–∞ #17: –ù–∞–ø–∏—Å–∞—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #2
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #22

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–°–æ–∑–¥–∞—Ç—å `apps/nutrition_programs/tests/test_services.py`:

1. **–¢–µ—Å—Ç—ã check_meal_compliance():**
   - test_exact_match_forbidden
   - test_fuzzy_match_forbidden
   - test_mixed_ingredients
   - test_cyrillic_case_insensitive

2. **–¢–µ—Å—Ç—ã get_active_program_for_client():**
   - test_active_program_exists
   - test_no_active_program
   - test_program_not_started_yet
   - test_program_already_ended

3. **–¢–µ—Å—Ç—ã get_program_day():**
   - test_first_day
   - test_middle_day
   - test_day_out_of_range

4. **–¢–µ—Å—Ç—ã generate_compliance_feedback():**
   - test_violation_feedback
   - test_compliant_feedback

---

### –ó–∞–¥–∞—á–∞ #18: –ù–∞–ø–∏—Å–∞—Ç—å API —Ç–µ—Å—Ç—ã –¥–ª—è endpoints –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Ç–∞–Ω–∏—è

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #5, #6
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** #22

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–°–æ–∑–¥–∞—Ç—å `apps/nutrition_programs/tests/test_api.py`:

1. **–¢–µ—Å—Ç—ã Console API:**
   - test_list_programs, test_create_program, test_update_program
   - test_activate_program, test_cancel_program
   - test_unauthorized_access, test_other_coach_program

2. **–¢–µ—Å—Ç—ã Miniapp API:**
   - test_get_today_program
   - test_get_program_history
   - test_unauthorized_miniapp

3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:**
   - test_meal_analysis_creates_compliance_check
   - test_violation_added_to_bot_response

---

### –ó–∞–¥–∞—á–∞ #22: –ü—Ä–æ–≤–µ—Å—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ flow

**–°—Ç–∞—Ç—É—Å:** pending
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** #3, #4, #7, #8, #9, #10, #11, #12, #13, #16, #17, #18, #20, #21
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** –Ω–µ—Ç

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã end-to-end:

1. **–°—Ü–µ–Ω–∞—Ä–∏–π –∫–æ—É—á–∞:**
   - –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –ø–∏—Ç–∞–Ω–∏—è
   - –£–∫–∞–∑–∞—Ç—å –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
   - –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É

2. **–°—Ü–µ–Ω–∞—Ä–∏–π –∫–ª–∏–µ–Ω—Ç–∞:**
   - –û—Ç–∫—Ä—ã—Ç—å miniapp, —É–≤–∏–¥–µ—Ç—å –≤–∏–¥–∂–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é

3. **–°—Ü–µ–Ω–∞—Ä–∏–π –∞–Ω–∞–ª–∏–∑–∞ —Ñ–æ—Ç–æ:**
   - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ —Å —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–º–∏ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞–º–∏ ‚Üí "–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç"
   - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ —Å –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–º–∏ ‚Üí –∑–∞–º–µ—á–∞–Ω–∏–µ

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
   - –ö–æ—É—á –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç —Å –ø–æ–º–µ—Ç–∫–æ–π –æ –Ω–∞—Ä—É—à–µ–Ω–∏–∏

5. **Edge cases:**
   - –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å
   - –ö–ª–∏–µ–Ω—Ç –±–µ–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã
   - –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–≥—Ä–∞–º–º —É –∫–ª–∏–µ–Ω—Ç–∞

---

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ**: #1, #14, #19
2. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ**: #2, #5
3. **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ**: #6 ‚Üí #3 ‚Üí #4 ‚Üí #20
4. **–ü–æ—Å–ª–µ #5, #6, #14**: #15
5. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ**: #7, #8, #9, #16
6. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ**: #10, #11, #12, #13
7. **–ü–æ—Å–ª–µ UI**: #21
8. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å UI**: #17, #18
9. **–í –∫–æ–Ω—Ü–µ**: #22
